{
  "version": 4,
  "terraform_version": "1.7.3",
  "serial": 9,
  "lineage": "c6fd379f-7dac-c8d1-3a22-8b0842056d13",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "datadog_dashboard",
      "name": "beacon",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "dashboard_lists": null,
            "dashboard_lists_removed": [],
            "description": "A Datadog Dashboard for the deployment",
            "id": "jet-zkf-wth",
            "is_read_only": false,
            "layout_type": "ordered",
            "notify_list": null,
            "reflow_type": "",
            "restricted_roles": null,
            "tags": null,
            "template_variable": [],
            "template_variable_preset": [],
            "title": "Beacon Service",
            "url": "/dashboard/jet-zkf-wth/beacon-service",
            "widget": [
              {
                "alert_graph_definition": [],
                "alert_value_definition": [],
                "change_definition": [],
                "check_status_definition": [],
                "distribution_definition": [],
                "event_stream_definition": [],
                "event_timeline_definition": [],
                "free_text_definition": [],
                "geomap_definition": [],
                "group_definition": [],
                "heatmap_definition": [],
                "hostmap_definition": [
                  {
                    "custom_link": [],
                    "group": null,
                    "no_group_hosts": true,
                    "no_metric_hosts": true,
                    "node_type": "container",
                    "request": [
                      {
                        "fill": [
                          {
                            "apm_query": [],
                            "log_query": [],
                            "process_query": [],
                            "q": "avg:process.stat.container.cpu.total_pct{image_name:onlydole/beacon} by {host}",
                            "rum_query": [],
                            "security_query": []
                          }
                        ],
                        "size": []
                      }
                    ],
                    "scope": null,
                    "style": [
                      {
                        "fill_max": "",
                        "fill_min": "",
                        "palette": "hostmap_blues",
                        "palette_flip": false
                      }
                    ],
                    "title": "Kubernetes Pods",
                    "title_align": "",
                    "title_size": ""
                  }
                ],
                "id": 1080644475622183,
                "iframe_definition": [],
                "image_definition": [],
                "list_stream_definition": [],
                "log_stream_definition": [],
                "manage_status_definition": [],
                "note_definition": [],
                "powerpack_definition": [],
                "query_table_definition": [],
                "query_value_definition": [],
                "run_workflow_definition": [],
                "scatterplot_definition": [],
                "service_level_objective_definition": [],
                "servicemap_definition": [],
                "slo_list_definition": [],
                "split_graph_definition": [],
                "sunburst_definition": [],
                "timeseries_definition": [],
                "toplist_definition": [],
                "topology_map_definition": [],
                "trace_service_definition": [],
                "treemap_definition": [],
                "widget_layout": []
              },
              {
                "alert_graph_definition": [],
                "alert_value_definition": [],
                "change_definition": [],
                "check_status_definition": [],
                "distribution_definition": [],
                "event_stream_definition": [],
                "event_timeline_definition": [],
                "free_text_definition": [],
                "geomap_definition": [],
                "group_definition": [],
                "heatmap_definition": [],
                "hostmap_definition": [],
                "id": 2361254535977023,
                "iframe_definition": [],
                "image_definition": [],
                "list_stream_definition": [],
                "log_stream_definition": [],
                "manage_status_definition": [],
                "note_definition": [],
                "powerpack_definition": [],
                "query_table_definition": [],
                "query_value_definition": [],
                "run_workflow_definition": [],
                "scatterplot_definition": [],
                "service_level_objective_definition": [],
                "servicemap_definition": [],
                "slo_list_definition": [],
                "split_graph_definition": [],
                "sunburst_definition": [],
                "timeseries_definition": [
                  {
                    "custom_link": [],
                    "event": [],
                    "legend_columns": null,
                    "legend_layout": "",
                    "legend_size": "",
                    "live_span": "",
                    "marker": [],
                    "request": [
                      {
                        "apm_query": [],
                        "audit_query": [],
                        "display_type": "line",
                        "formula": [],
                        "log_query": [],
                        "metadata": [],
                        "network_query": [],
                        "on_right_yaxis": false,
                        "process_query": [],
                        "q": "top(avg:kubernetes.cpu.usage.total{image_name:onlydole/beacon} by {short_image,container_id}, 10, 'mean', 'desc')",
                        "query": [],
                        "rum_query": [],
                        "security_query": [],
                        "style": [
                          {
                            "line_type": "solid",
                            "line_width": "normal",
                            "palette": "dog_classic"
                          }
                        ]
                      }
                    ],
                    "right_yaxis": [],
                    "show_legend": false,
                    "title": "CPU Utilization",
                    "title_align": "",
                    "title_size": "",
                    "yaxis": [
                      {
                        "include_zero": true,
                        "label": "",
                        "max": "auto",
                        "min": "auto",
                        "scale": "linear"
                      }
                    ]
                  }
                ],
                "toplist_definition": [],
                "topology_map_definition": [],
                "trace_service_definition": [],
                "treemap_definition": [],
                "widget_layout": []
              },
              {
                "alert_graph_definition": [
                  {
                    "alert_id": "200247",
                    "live_span": "",
                    "title": "Kubernetes Node CPU",
                    "title_align": "",
                    "title_size": "",
                    "viz_type": "timeseries"
                  }
                ],
                "alert_value_definition": [],
                "change_definition": [],
                "check_status_definition": [],
                "distribution_definition": [],
                "event_stream_definition": [],
                "event_timeline_definition": [],
                "free_text_definition": [],
                "geomap_definition": [],
                "group_definition": [],
                "heatmap_definition": [],
                "hostmap_definition": [],
                "id": 7479575368965368,
                "iframe_definition": [],
                "image_definition": [],
                "list_stream_definition": [],
                "log_stream_definition": [],
                "manage_status_definition": [],
                "note_definition": [],
                "powerpack_definition": [],
                "query_table_definition": [],
                "query_value_definition": [],
                "run_workflow_definition": [],
                "scatterplot_definition": [],
                "service_level_objective_definition": [],
                "servicemap_definition": [],
                "slo_list_definition": [],
                "split_graph_definition": [],
                "sunburst_definition": [],
                "timeseries_definition": [],
                "toplist_definition": [],
                "topology_map_definition": [],
                "trace_service_definition": [],
                "treemap_definition": [],
                "widget_layout": []
              },
              {
                "alert_graph_definition": [],
                "alert_value_definition": [],
                "change_definition": [],
                "check_status_definition": [],
                "distribution_definition": [],
                "event_stream_definition": [],
                "event_timeline_definition": [],
                "free_text_definition": [],
                "geomap_definition": [],
                "group_definition": [],
                "heatmap_definition": [],
                "hostmap_definition": [
                  {
                    "custom_link": [],
                    "group": null,
                    "no_group_hosts": true,
                    "no_metric_hosts": true,
                    "node_type": "host",
                    "request": [
                      {
                        "fill": [
                          {
                            "apm_query": [],
                            "log_query": [],
                            "process_query": [],
                            "q": "avg:system.cpu.user{*} by {host}",
                            "rum_query": [],
                            "security_query": []
                          }
                        ],
                        "size": []
                      }
                    ],
                    "scope": null,
                    "style": [
                      {
                        "fill_max": "",
                        "fill_min": "",
                        "palette": "hostmap_blues",
                        "palette_flip": false
                      }
                    ],
                    "title": "Kubernetes Nodes",
                    "title_align": "",
                    "title_size": ""
                  }
                ],
                "id": 2662909586518995,
                "iframe_definition": [],
                "image_definition": [],
                "list_stream_definition": [],
                "log_stream_definition": [],
                "manage_status_definition": [],
                "note_definition": [],
                "powerpack_definition": [],
                "query_table_definition": [],
                "query_value_definition": [],
                "run_workflow_definition": [],
                "scatterplot_definition": [],
                "service_level_objective_definition": [],
                "servicemap_definition": [],
                "slo_list_definition": [],
                "split_graph_definition": [],
                "sunburst_definition": [],
                "timeseries_definition": [],
                "toplist_definition": [],
                "topology_map_definition": [],
                "trace_service_definition": [],
                "treemap_definition": [],
                "widget_layout": []
              },
              {
                "alert_graph_definition": [],
                "alert_value_definition": [],
                "change_definition": [],
                "check_status_definition": [],
                "distribution_definition": [],
                "event_stream_definition": [],
                "event_timeline_definition": [],
                "free_text_definition": [],
                "geomap_definition": [],
                "group_definition": [],
                "heatmap_definition": [],
                "hostmap_definition": [],
                "id": 5629424966973171,
                "iframe_definition": [],
                "image_definition": [],
                "list_stream_definition": [],
                "log_stream_definition": [],
                "manage_status_definition": [],
                "note_definition": [],
                "powerpack_definition": [],
                "query_table_definition": [],
                "query_value_definition": [],
                "run_workflow_definition": [],
                "scatterplot_definition": [],
                "service_level_objective_definition": [],
                "servicemap_definition": [],
                "slo_list_definition": [],
                "split_graph_definition": [],
                "sunburst_definition": [],
                "timeseries_definition": [
                  {
                    "custom_link": [],
                    "event": [],
                    "legend_columns": null,
                    "legend_layout": "",
                    "legend_size": "",
                    "live_span": "",
                    "marker": [],
                    "request": [
                      {
                        "apm_query": [],
                        "audit_query": [],
                        "display_type": "line",
                        "formula": [],
                        "log_query": [],
                        "metadata": [],
                        "network_query": [],
                        "on_right_yaxis": false,
                        "process_query": [],
                        "q": "top(avg:kubernetes.memory.usage{image_name:onlydole/beacon} by {container_name}, 10, 'mean', 'desc')",
                        "query": [],
                        "rum_query": [],
                        "security_query": [],
                        "style": [
                          {
                            "line_type": "solid",
                            "line_width": "normal",
                            "palette": "dog_classic"
                          }
                        ]
                      }
                    ],
                    "right_yaxis": [],
                    "show_legend": false,
                    "title": "Memory Utilization",
                    "title_align": "",
                    "title_size": "",
                    "yaxis": [
                      {
                        "include_zero": true,
                        "label": "",
                        "max": "auto",
                        "min": "auto",
                        "scale": "linear"
                      }
                    ]
                  }
                ],
                "toplist_definition": [],
                "topology_map_definition": [],
                "trace_service_definition": [],
                "treemap_definition": [],
                "widget_layout": []
              }
            ]
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "datadog_monitor.beacon"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_monitor",
      "name": "beacon",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_logs_sample": null,
            "enable_samples": null,
            "escalation_message": "Please investigate the Kubernetes Pods, @operator",
            "evaluation_delay": 0,
            "force_delete": null,
            "group_retention_duration": "",
            "groupby_simple_monitor": null,
            "id": "200247",
            "include_tags": true,
            "locked": false,
            "message": "Kubernetes Pods are not in an optimal health state. Notify: @operator",
            "monitor_threshold_windows": [],
            "monitor_thresholds": [
              {
                "critical": "1",
                "critical_recovery": "",
                "ok": "",
                "unknown": "",
                "warning": "2",
                "warning_recovery": ""
              }
            ],
            "name": "Kubernetes Pod Health",
            "new_group_delay": 0,
            "new_host_delay": 300,
            "no_data_timeframe": 10,
            "notification_preset_name": "",
            "notify_audit": false,
            "notify_by": [],
            "notify_no_data": true,
            "on_missing_data": "",
            "priority": 0,
            "query": "max(last_1m):sum:kubernetes.containers.running{short_image:beacon} \u003c= 1",
            "renotify_interval": 0,
            "renotify_occurrences": 0,
            "renotify_statuses": null,
            "require_full_window": true,
            "restricted_roles": null,
            "scheduling_options": [],
            "tags": [
              "app:beacon",
              "env:demo"
            ],
            "timeout_h": 0,
            "type": "metric alert",
            "validate": null,
            "variables": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_monitor",
      "name": "process_alert_example",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "enable_logs_sample": null,
            "enable_samples": null,
            "escalation_message": "",
            "evaluation_delay": 0,
            "force_delete": null,
            "group_retention_duration": "",
            "groupby_simple_monitor": null,
            "id": "200244",
            "include_tags": true,
            "locked": false,
            "message": "Multiple Java processes running on example-tag",
            "monitor_threshold_windows": [],
            "monitor_thresholds": [
              {
                "critical": "1",
                "critical_recovery": "0",
                "ok": "",
                "unknown": "",
                "warning": "",
                "warning_recovery": ""
              }
            ],
            "name": "Process Alert Monitor",
            "new_group_delay": 0,
            "new_host_delay": 300,
            "no_data_timeframe": 0,
            "notification_preset_name": "",
            "notify_audit": false,
            "notify_by": [],
            "notify_no_data": false,
            "on_missing_data": "",
            "priority": 0,
            "query": "processes('java').over('example-tag').rollup('count').last('10m') \u003e 1",
            "renotify_interval": 60,
            "renotify_occurrences": 0,
            "renotify_statuses": null,
            "require_full_window": true,
            "restricted_roles": null,
            "scheduling_options": [],
            "tags": [],
            "timeout_h": 0,
            "type": "process alert",
            "validate": null,
            "variables": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "datadog_synthetics_test",
      "name": "beaconapi",
      "provider": "provider[\"registry.terraform.io/datadog/datadog\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_step": [],
            "assertion": [
              {
                "operator": "is",
                "property": "",
                "target": "200",
                "targetjsonpath": [],
                "targetxpath": [],
                "timings_scope": "",
                "type": "statusCode"
              }
            ],
            "browser_step": [],
            "browser_variable": [],
            "config_variable": [],
            "device_ids": [],
            "id": "t9b-gzh-qbb",
            "locations": [
              "aws:us-gov-west-1"
            ],
            "message": "Oh no! Light from the Beacon app is no longer shining!",
            "monitor_id": 200252,
            "name": "Beacon API Check",
            "options_list": [
              {
                "accept_self_signed": false,
                "allow_insecure": false,
                "check_certificate_revocation": false,
                "ci": [],
                "disable_cors": false,
                "disable_csp": false,
                "follow_redirects": false,
                "http_version": "",
                "ignore_server_certificate_error": false,
                "initial_navigation_timeout": 0,
                "min_failure_duration": 0,
                "min_location_failed": 1,
                "monitor_name": "",
                "monitor_options": [],
                "monitor_priority": 0,
                "no_screenshot": false,
                "restricted_roles": [],
                "retry": [],
                "rum_settings": [],
                "scheduling": [],
                "tick_every": 900
              }
            ],
            "request_basicauth": [],
            "request_client_certificate": [],
            "request_definition": [
              {
                "body": "",
                "body_type": "",
                "call_type": "",
                "certificate_domains": [],
                "dns_server": "",
                "dns_server_port": 0,
                "host": "",
                "message": "",
                "method": "GET",
                "no_saving_response_body": false,
                "number_of_packets": 0,
                "persist_cookies": false,
                "plain_proto_file": "",
                "port": 0,
                "proto_json_descriptor": "",
                "servername": "",
                "service": "",
                "should_track_hops": false,
                "timeout": 60,
                "url": "https://dummy.restapiexample.com/api/v1/employees"
              }
            ],
            "request_headers": {},
            "request_metadata": {},
            "request_proxy": [],
            "request_query": {},
            "set_cookie": null,
            "status": "live",
            "subtype": "http",
            "tags": [
              "app:beacon",
              "env:demo"
            ],
            "type": "api"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    }
  ],
  "check_results": null
}
